<!DOCTYPE html>
<html>
<head>
	<title>jquery-sequence demo</title>
	<link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400' rel='stylesheet' type='text/css'>
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="prism.js"></script>
	<script type="text/javascript" src="jquery.sequence.min.js"></script>
	<link rel="stylesheet" type="text/css" href="prism.css">
	<style type="text/css">
	html, body {
		margin: 0;
		padding: 0;
	}
	html {
		height: 100%;
	}
	body {
		background-color: #F7F7F7;
		min-height: 100%;
		font-family: 'Source Sans Pro', Helvetica, sans-serif;
		text-align: center;
	}
	
	.container {
		background-color: #eee;
		position: relative;
	}
	.inner-container {
		max-width: 900px;
		max-width: 900px;
		margin: auto;
	}
	
	h1 {
		font-weight: 300;
		font-size: 2.5em;
		margin: 0;
		padding: 1em 0;
	}
	h3 {
		margin: 0;
		margin-top: 30px;
		padding: 0 0 20px;
	}
	pre {
		text-align: left;
	}
	.controller {
		padding: 0 2em;
		box-sizing: border-box;
	}
	a {
		color: #2985db;
		text-decoration: none;
	}
	.button {
		transition: background-color 1s;
		cursor: pointer;
		background-color: #2985db;
		color: white;
		border: none;
		font: inherit;
		border-radius: 6px;
		padding: 0.5em 0.75em;
		margin: 0.25em;
	}
	.button.off {
		cursor: default;
		opacity: 0.6;
	}
	.console, .controller {
		display: inline-block;
		width: 50%;
		vertical-align: top;
		max-width: 700px;
		text-align: left;
	}
	code {
		white-space: pre-wrap !important;
	}

	.box {
		width: 80px;
		height: 80px;
		background-color: #ccc;
		margin: 5px;
		display: inline-block;

		-webkit-transition: background-color 250ms;
		   -moz-transition: background-color 250ms;
		    -ms-transition: background-color 250ms;
		     -o-transition: background-color 250ms;
		        transition: background-color 250ms;
	}
	</style>
	<script>
	var $el, seq1release, seq2release;
	function buttons () {
		$('.controller').append('<h3>Sequence 1</h3>');
		seq1release = btn('Release', function () {
			seq1.release("remaining");
			seq1release.addClass('off');
			demoConsole.add("seq1.release( \"remaining\" );");
		});
		btn('Hold', function () {
			seq1release.removeClass('off');
			seq1.hold();
			demoConsole.add("seq1.hold();");
		});
		btn('Speed down', function () {
			var newInterval = seq1.getInterval() * 2;
			seq1.setInterval( newInterval );
			demoConsole.add("seq1.setInterval( " + newInterval + " );");
		});
		btn('Speed up', function () {
			var newInterval = seq1.getInterval() / 2;
			seq1.setInterval( newInterval );
			demoConsole.add("seq1.setInterval( " + newInterval + " );");
		});
		btn('Run all', function () {
			seq1.runAll();
			demoConsole.add("seq1.runAll();");
		});
		btn('Reset', function () {
			seq1.reset();
			demoConsole.add("seq1.reset();");
		});


		$('.controller').append('<h3>Sequence 2</h3>');
		seq2release = btn('Release', function () {
			seq2.release("remaining");
			seq2release.addClass('off');
			demoConsole.add("seq2.release( \"remaining\" );");
		});
		btn('Hold', function () {
			seq2release.removeClass('off');
			seq2.hold();
			demoConsole.add("seq2.hold();");
		});
		btn('Speed down', function () {
			var newInterval = seq2.getInterval() * 2;
			seq2.setInterval( newInterval );
			demoConsole.add("seq2.setInterval( " + newInterval + " );");
		});
		btn('Speed up', function () {
			var newInterval = seq2.getInterval() / 2;
			seq2.setInterval( newInterval );
			demoConsole.add("seq2.setInterval( " + newInterval + " );");
		});
		btn('Run all', function () {
			seq2.runAll();
			demoConsole.add("seq2.runAll();");
		});
		btn('Reset', function () {
			seq2.reset();
			demoConsole.add("seq2.reset();");
		});
	}

	var demoConsole = {
		add: function (code) {
			var codeEl = $('<code>')
				.addClass('language-javascript')
				.html(code)
			var pre = $('<pre>')
				.append(codeEl)
				.prependTo('.console')
			pre.hide()
			pre.slideDown(300);

			Prism.highlightElement(codeEl[0]);
		}
	};

	var btn = function (lbl, cb) {
		if (!lbl) return $('.controller').append('<br><br>')

		return $('<button>')
			.html(lbl)
			.addClass('button')
			.click(function () { if($(this).hasClass('off')) return; cb.apply(this); })
			.appendTo('.controller');
				
	};

	var reset = function () {
		var $container = $('.inner-container');
		$container.empty();

		for (var i = 1; i <= 50; i++) {
			$container.append('<div class="box"></div>');
		}

		return $container.children();
	};

	var seq1, seq2;
	$(document).ready(function () {
		buttons();
		$el = reset();
		seq1 = $el.sequence(function () { $(this).css('background-color', '#aaa'); }, 100);
		seq2 = $el.sequence(function () { $(this).css('background-color', '#ccc'); }, 100, false);
		var resetSeq = function (seq, btn) {
			seq.reset();
			btn.removeClass('off');
			seq.promise.always(function () {
				setTimeout(function () {
					resetSeq(seq, btn);
				});
			});
		};
		resetSeq(seq1, seq1release);
		resetSeq(seq2, seq2release);

		demoConsole.add('// Appended 50 &lt;div class="box"&gt; containers');
		demoConsole.add("var seq1 = $( \".box\" )\n\
.sequence( function() {\n\
    $( this ).css( \"background-color\", \"#ccc\" );\n\
}, 100, false );");
		demoConsole.add("var seq2 = $( \".box\" )\n\
.sequence( function() {\n\
    $( this ).css( \"background-color\", \"#ccc\" );\n\
}, 100, false );");
	});
	</script>
</head>
<body>
	<h1>jquery-sequence demo</h1>
	<p>Just a little demo for the <a href="https://github.com/Loilo/jquery-sequence">jquery-sequence</a> repo.</p>
	<div class="container"><div class="inner-container"></div></div>
	<div class="console"></div
	><div class="controller"></div>
</body>
</html>