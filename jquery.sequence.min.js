!function(a){a.fn.sequence=function(b,c,d){"boolean"!=typeof d&&(d=!0);var e=!1,f=0,g=this,h=a.Deferred(),i={paused:!d,interval:c},j=null,k=0,l=0;g.data("sequence-queued",!0).data("sequence-done",!1),h.getInterval=function(){return i.interval},h.setInterval=function(a){e||(i.interval=a)},h.hold=function(){e||(l=1-(Date.now()-k)/i.interval,clearTimeout(j),i.paused=!0)},h.release=function(a){e||("undefined"==typeof a&&(a="now"),i.paused=!1,n(a))},h.runAll=function(){if(!e){h.hold();for(var d,c=f;d=g.get(c);)b.apply(d),a(d).data("sequence-done",!0),c++;m(!0)}},h.clear=function(){e||(h.hold(),m(!1))};var m=function(a){"boolean"!=typeof a&&(a=!0),g.removeData("sequence-queued").removeData("sequence-done"),a?h.resolve():h.reject(),e=!0},n=function(c){if(!i.paused){"undefined"==typeof c&&(c="now");var d=i.interval;switch(c){case"remaining":d*=l;break;case"now":var e=g.get(f);if("undefined"==typeof e)return;if(b.apply(e),a(e).data("sequence-done",!0),f++,f===g.length)return void m(!0)}k=Date.now(),j=setTimeout(function(){n()},d)}};return setTimeout(function(){n()}),h}}(jQuery);